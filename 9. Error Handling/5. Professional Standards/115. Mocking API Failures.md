# 115. Mocking API Failures

Canonical documentation for 115. Mocking API Failures. This document defines the conceptual model, terminology, and standard usage patterns.

> [!NOTE]
> This documentation is implementation-agnostic and intended to serve as a stable reference.

## 1. Purpose and Problem Space
Describe why 115. Mocking API Failures exists and the class of problems it addresses.
Mocking API failures is a crucial aspect of software development, particularly in the context of integration testing and quality assurance. The primary purpose of mocking API failures is to simulate real-world error scenarios, allowing developers to test the resilience and robustness of their applications. By mimicking API failures, developers can identify potential issues, debug their code, and ensure that their applications can handle errors gracefully. The class of problems that mocking API failures addresses includes testing for error handling, fault tolerance, and overall system reliability.

## 2. Conceptual Overview
Provide a high-level mental model of the topic.
Mocking API failures involves creating a simulated environment that replicates the behavior of a failed API, allowing developers to test their application's response to various error scenarios. This can include simulating network errors, server errors, authentication errors, and other types of failures. By using mocking libraries or frameworks, developers can create test doubles that mimic the behavior of a failed API, enabling them to test their application's error handling mechanisms in a controlled and repeatable manner.

## 3. Terminology and Definitions
| Term | Definition |
|------|------------|
| Mocking | The process of creating a simulated environment that replicates the behavior of a real system or component. |
| Test Double | A substitute for a real object or system, used to simulate its behavior in a testing environment. |
| API Failure | A simulated error scenario that mimics the behavior of a failed API, used to test an application's error handling mechanisms. |
| Error Handling | The process of detecting, reporting, and recovering from errors that occur during the execution of an application. |
| Fault Tolerance | The ability of a system to continue operating correctly even when one or more components fail or behave incorrectly. |

## 4. Core Concepts
Explain the fundamental ideas that form the basis of this topic.
The core concepts of mocking API failures include:
* **Error simulation**: Creating a simulated environment that replicates the behavior of a failed API.
* **Test doubles**: Using substitute objects or systems to simulate the behavior of a real API.
* **Error handling**: Testing an application's ability to detect, report, and recover from errors.
* **Fault tolerance**: Ensuring that an application can continue operating correctly even when one or more components fail or behave incorrectly.

## 5. Standard Model
Describe the generally accepted or recommended model.
The standard model for mocking API failures involves using a mocking library or framework to create test doubles that simulate the behavior of a failed API. This can include using libraries such as Mockito, Moq, or WireMock to create mock objects that mimic the behavior of a real API. The model typically involves the following steps:
1. Identify the API endpoints or methods that need to be mocked.
2. Create test doubles that simulate the behavior of the failed API.
3. Configure the test doubles to return error responses or throw exceptions.
4. Write test cases that exercise the application's error handling mechanisms.

## 6. Common Patterns
Document recurring, accepted patterns.
Common patterns for mocking API failures include:
* **Happy path testing**: Testing an application's behavior when the API returns a successful response.
* **Error path testing**: Testing an application's behavior when the API returns an error response.
* **Edge case testing**: Testing an application's behavior when the API returns an unexpected or edge case response.
* **Fault injection testing**: Testing an application's behavior when the API is intentionally failed or corrupted.

## 7. Anti-Patterns
Describe common but discouraged practices.
Anti-patterns for mocking API failures include:
* **Over-mocking**: Creating too many test doubles, which can make the test code brittle and difficult to maintain.
* **Under-mocking**: Not creating enough test doubles, which can leave the application's error handling mechanisms untested.
* **Mocking the wrong thing**: Mocking the wrong API endpoint or method, which can lead to incorrect test results.
* **Not testing for fault tolerance**: Failing to test an application's ability to continue operating correctly even when one or more components fail or behave incorrectly.

## 8. References
Provide exactly five authoritative external references.
1. [Mockito Documentation](https://site.mockito.org/)
2. [WireMock Documentation](https://wiremock.org/docs/)
3. [Moq Documentation](https://github.com/moq/moq)
4. [API Testing Best Practices](https://www.apigee.com/about/blog/api-testing-best-practices)
5. [Fault Tolerance in Software Systems](https://ieeexplore.ieee.org/document/6373455)

## 9. Change Log
| Version | Date | Description |
|---------|------|-------------|
| 1.0 | 2026-01-23 | Initial documentation |