# 100. Retry After Header Logic

Canonical documentation for 100. Retry After Header Logic. This document defines the conceptual model, terminology, and standard usage patterns.

> [!NOTE]
> This documentation is implementation-agnostic and intended to serve as a stable reference.

## 1. Purpose and Problem Space
Describe why 100. Retry After Header Logic exists and the class of problems it addresses.
The Retry After header logic exists to handle situations where a server is unable to process a request due to temporary overloading or maintenance. This logic provides a standardized way for servers to indicate to clients when they can retry a request, helping to prevent cascading failures and reduce the load on overloaded systems. The class of problems it addresses includes handling temporary server errors, managing server load, and improving the reliability of networked applications.

## 2. Conceptual Overview
Provide a high-level mental model of the topic.
The Retry After header logic is based on a simple yet effective concept: when a server is unable to process a request, it returns a response with a Retry After header, specifying the amount of time the client should wait before retrying the request. This allows clients to back off and retry the request at a later time, reducing the load on the server and improving the overall reliability of the system.

## 3. Terminology and Definitions
| Term | Definition |
|------|------------|
| Retry After Header | A response header that specifies the amount of time a client should wait before retrying a request. |
| Retry Delay | The amount of time a client waits before retrying a request, as specified by the Retry After header. |
| Server Overload | A situation where a server is unable to process requests due to excessive load or resource constraints. |
| Temporary Error | A type of error that is expected to be resolved after a short period, such as a server overload or maintenance. |

## 4. Core Concepts
Explain the fundamental ideas that form the basis of this topic.
The core concepts of the Retry After header logic include:
* **Temporary errors**: The idea that some errors are temporary and can be resolved after a short period.
* **Server overload**: The concept that servers can become overloaded and unable to process requests.
* **Retry delay**: The idea that clients can wait for a specified amount of time before retrying a request.
* **Standardization**: The importance of standardizing the way servers indicate retry delays to clients.

## 5. Standard Model
Describe the generally accepted or recommended model.
The standard model for the Retry After header logic involves the following steps:
1. A client sends a request to a server.
2. The server is unable to process the request due to temporary overload or maintenance.
3. The server returns a response with a Retry After header, specifying the amount of time the client should wait before retrying the request.
4. The client waits for the specified amount of time before retrying the request.
5. The server processes the retried request, or returns another Retry After header if it is still unable to process the request.

## 6. Common Patterns
Document recurring, accepted patterns.
Common patterns for using the Retry After header logic include:
* **Exponential backoff**: Clients wait for an increasing amount of time between retries, to prevent overwhelming the server with repeated requests.
* **Limited retries**: Clients limit the number of times they retry a request, to prevent infinite loops.
* **Idempotent requests**: Clients use idempotent requests, which can be safely retried without causing unintended side effects.

## 7. Anti-Patterns
Describe common but discouraged practices.
Anti-patterns for using the Retry After header logic include:
* **Ignoring Retry After headers**: Clients ignore the Retry After header and retry requests immediately, overwhelming the server with repeated requests.
* **Using fixed retry delays**: Clients use fixed retry delays, rather than adapting to the server's specified retry delay.
* **Not limiting retries**: Clients do not limit the number of times they retry a request, leading to infinite loops and server overload.

## 8. References
Provide exactly five authoritative external references.
1. [RFC 7231: Hypertext Transfer Protocol (HTTP/1.1)](https://tools.ietf.org/html/rfc7231)
2. [HTTP/1.1: Retry-After Header](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Retry-After)
3. [The Retry-After Header in HTTP](https://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.37)
4. [HTTP Retry After Header Best Practices](https://www.keycdn.com/blog/http-retry-after-header)
5. [Using the Retry-After Header to Improve Server Reliability](https://www.nginx.com/blog/retry-after-header-improve-server-reliability/)

## 9. Change Log
| Version | Date | Description |
|---------|------|-------------|
| 1.0 | 2026-01-23 | Initial documentation |