# 98. Handling 502 Bad Gateway

Canonical documentation for 98. Handling 502 Bad Gateway. This document defines the conceptual model, terminology, and standard usage patterns.

> [!NOTE]
> This documentation is implementation-agnostic and intended to serve as a stable reference.

## 1. Purpose and Problem Space
Describe why 98. Handling 502 Bad Gateway exists and the class of problems it addresses.
The 502 Bad Gateway error occurs when a server acting as a gateway or proxy receives an invalid response from an upstream server. This error is part of the HTTP/1.1 protocol and is defined in RFC 7231. The purpose of handling 502 Bad Gateway is to provide a robust and reliable way to manage and resolve this type of error, ensuring that users receive a meaningful error message or a suitable alternative response.

## 2. Conceptual Overview
Provide a high-level mental model of the topic.
The conceptual model for handling 502 Bad Gateway involves understanding the role of gateways and proxies in HTTP requests, identifying the causes of the error, and implementing strategies to detect, report, and recover from the error. This includes configuring servers, implementing retry mechanisms, and providing user-friendly error messages.

## 3. Terminology and Definitions
| Term | Definition |
|------|------------|
| Gateway | A server that acts as an intermediary between a client and a server, forwarding requests and responses. |
| Proxy | A server that acts on behalf of a client, making requests to other servers and returning responses to the client. |
| Upstream Server | The server that is the origin of the content or service being requested. |
| Downstream Client | The client that is making the request to the gateway or proxy. |
| Retry Mechanism | A strategy for re-sending a request that has failed due to a 502 Bad Gateway error. |

## 4. Core Concepts
Explain the fundamental ideas that form the basis of this topic.
The core concepts of handling 502 Bad Gateway include:
* Understanding the causes of the error, such as server overload, network connectivity issues, or invalid responses from upstream servers.
* Implementing detection mechanisms, such as monitoring server logs and response codes.
* Developing retry mechanisms, such as exponential backoff or circuit breakers.
* Providing user-friendly error messages or alternative responses, such as a cached version of the content.

## 5. Standard Model
Describe the generally accepted or recommended model.
The standard model for handling 502 Bad Gateway involves:
1. Detecting the error through server logs or response codes.
2. Implementing a retry mechanism to re-send the request.
3. Providing a user-friendly error message or alternative response if the retry mechanism fails.
4. Monitoring server performance and adjusting the retry mechanism as needed.

## 6. Common Patterns
Document recurring, accepted patterns.
Common patterns for handling 502 Bad Gateway include:
* Using a load balancer to distribute traffic and reduce the load on individual servers.
* Implementing a caching layer to reduce the number of requests to upstream servers.
* Using a content delivery network (CDN) to distribute content and reduce the load on origin servers.

## 7. Anti-Patterns
Describe common but discouraged practices.
Anti-patterns for handling 502 Bad Gateway include:
* Ignoring the error and allowing it to propagate to the user.
* Implementing a retry mechanism that is too aggressive, leading to further server overload.
* Failing to monitor server performance and adjust the retry mechanism accordingly.

## 8. References
Provide exactly five authoritative external references.
1. [RFC 7231 - Hypertext Transfer Protocol (HTTP/1.1): Semantics and Content](https://tools.ietf.org/html/rfc7231)
2. [HTTP/1.1 Status Code Definitions](https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)
3. [Apache HTTP Server Documentation - Error Responses](https://httpd.apache.org/docs/2.4/custom-error.html)
4. [NGINX Documentation - Error Pages](https://nginx.org/en/docs/http/ngx_http_core_module.html#error_page)
5. [Mozilla Developer Network - HTTP/1.1 Status Code 502](https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/502)

## 9. Change Log
| Version | Date | Description |
|---------|------|-------------|
| 1.0 | 2026-01-23 | Initial documentation |