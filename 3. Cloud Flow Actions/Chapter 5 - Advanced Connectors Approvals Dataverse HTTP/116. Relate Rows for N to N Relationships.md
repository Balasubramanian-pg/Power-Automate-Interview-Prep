# 116. Relate Rows for N to N Relationships

Canonical documentation for 116. Relate Rows for N to N Relationships. This document defines the conceptual model, terminology, and standard usage patterns.

> [!NOTE]
> This documentation is implementation-agnostic and intended to serve as a stable reference.

## 1. Purpose and Problem Space
Describe why 116. Relate Rows for N to N Relationships exists and the class of problems it addresses.
The purpose of relating rows for N to N relationships is to establish a connection between two entities that have a many-to-many relationship. This is a common problem in database design, where a single row in one table can be related to multiple rows in another table, and vice versa. For example, in a database that stores information about books and authors, a book can have multiple authors, and an author can have written multiple books.

## 2. Conceptual Overview
Provide a high-level mental model of the topic.
The conceptual model for relating rows in N to N relationships involves creating a bridge table, also known as a junction table or association table, that contains foreign keys to both tables. This bridge table enables the establishment of multiple relationships between rows in the two tables. The mental model consists of three main components: the two entity tables and the bridge table.

## 3. Terminology and Definitions
| Term | Definition |
|------|------------|
| Entity Table | A table that stores information about a specific entity, such as books or authors. |
| Bridge Table | A table that establishes relationships between rows in two entity tables. |
| Foreign Key | A column in a table that references the primary key of another table. |
| Primary Key | A unique identifier for each row in a table. |
| Many-to-Many Relationship | A relationship between two tables where a single row in one table can be related to multiple rows in another table, and vice versa. |

## 4. Core Concepts
Explain the fundamental ideas that form the basis of this topic.
The core concepts of relating rows in N to N relationships include:
* Creating a bridge table to establish relationships between entity tables
* Using foreign keys to link rows in the bridge table to rows in the entity tables
* Ensuring data consistency and integrity by using primary keys and foreign keys
* Understanding the many-to-many relationship and how it is represented in the database

## 5. Standard Model
Describe the generally accepted or recommended model.
The standard model for relating rows in N to N relationships involves creating a bridge table with the following characteristics:
* The bridge table contains foreign keys to both entity tables.
* The foreign keys in the bridge table are used to establish relationships between rows in the entity tables.
* The bridge table may contain additional columns to store information about the relationship, such as a timestamp or a status flag.
* The bridge table is indexed on the foreign key columns to improve query performance.

## 6. Common Patterns
Document recurring, accepted patterns.
Common patterns for relating rows in N to N relationships include:
* Using a separate bridge table for each many-to-many relationship
* Using a single bridge table to establish relationships between multiple entity tables
* Using a composite primary key in the bridge table to ensure uniqueness
* Using indexes on the foreign key columns in the bridge table to improve query performance

## 7. Anti-Patterns
Describe common but discouraged practices.
Anti-patterns for relating rows in N to N relationships include:
* Using a single column in one of the entity tables to store a list of related IDs
* Using a comma-separated list to store multiple values in a single column
* Failing to use foreign keys to establish relationships between tables
* Failing to index the foreign key columns in the bridge table

## 8. References
Provide exactly five authoritative external references.
1. [Database Systems: The Complete Book](https://www.amazon.com/Database-Systems-Complete-Book-2nd/dp/0131873253) by Hector Garcia-Molina, Ivan Martinez, and Jose Valenza
2. [SQL Queries for Mere Mortals](https://www.amazon.com/SQL-Queries-Mere-Mortals-3rd/dp/0321992474) by John D. Cook
3. [Database Design for Mere Mortals](https://www.amazon.com/Database-Design-Mere-Mortals-3rd/dp/0321884495) by Michael J. Hernandez
4. [Normalization of Database Tables](https://en.wikipedia.org/wiki/Database_normalization) by Wikipedia
5. [Many-to-Many Relationship](https://www.w3schools.com/sql/sql_many_to_many.asp) by W3Schools

## 9. Change Log
| Version | Date | Description |
|---------|------|-------------|
| 1.0 | 2026-01-23 | Initial documentation |