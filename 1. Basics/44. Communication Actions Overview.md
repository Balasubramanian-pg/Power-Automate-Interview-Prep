# 44. Communication Actions Overview

Canonical documentation for 44. Communication Actions Overview. This document defines concepts, terminology, and standard usage.

## Purpose
Communication Actions represent the functional bridge between internal system logic and external entities (human users, third-party services, or hardware interfaces). The purpose of this topic is to define a standardized framework for how systems initiate, execute, and track the exchange of information. By formalizing Communication Actions, organizations ensure consistency in messaging, maintain audit trails, and decouple the business logic of *why* a message is sent from the technical complexity of *how* it is delivered.

> [!NOTE]
> This documentation is intended to be implementation-agnostic and authoritative.

## Scope
Clarify what is in scope and out of scope for this topic.

**In scope:**
* The lifecycle of a communication event (Trigger to Resolution).
* Abstract classification of communication channels.
* Data structures required for consistent message delivery.
* Governance and logging requirements for outbound interactions.

**Out of scope:**
* Specific vendor API specifications (e.g., SendGrid, Twilio, Slack API).
* UI/UX design for message templates.
* Network-level protocol details (e.g., TCP/IP handshakes).

## Definitions
Provide precise definitions for key terms.

| Term | Definition |
|------|------------|
| **Action** | A discrete, executable unit of work intended to transmit data to an external recipient. |
| **Channel** | The medium through which a communication is delivered (e.g., Email, SMS, Push, Webhook). |
| **Payload** | The actual content or data packet contained within the communication action. |
| **Recipient** | The target entity (user, device, or endpoint) designated to receive the communication. |
| **Provider** | The technical service or gateway responsible for the final delivery of the action. |
| **Idempotency Key** | A unique identifier that ensures a communication action is not executed more than once for the same event. |
| **Dispatch** | The act of handing off the communication action from the core system to the provider. |

## Core Concepts

### 1. Decoupling Logic from Delivery
Communication Actions must be decoupled from the business logic that triggers them. The system generating the "Order Shipped" event should not need to know the retry logic for an SMS gateway.

### 2. Channel Agnosticism
A robust model treats the channel as a variable. A single logical notification (e.g., "Password Reset") should be capable of being routed through different channels based on recipient preference or system availability without altering the underlying trigger.

### 3. State Awareness
Every Communication Action must possess a state. Common states include:
* **Pending:** Created but not yet dispatched.
* **Sent:** Successfully handed off to the provider.
* **Delivered:** Confirmed receipt by the end-target (where supported).
* **Failed:** Permanent delivery failure.
* **Retrying:** Temporary failure undergoing automated recovery.

## Standard Model

The standard model for a Communication Action follows a linear lifecycle:

1.  **Trigger:** A system event or manual intervention initiates the request.
2.  **Resolution:** The system identifies the recipient(s) and their preferred channels.
3.  **Composition:** The payload is generated, often by merging a template with dynamic data.
4.  **Validation:** The action is checked against governance rules (e.g., "Do Not Disturb" hours, frequency caps).
5.  **Dispatch:** The action is sent to the provider.
6.  **Feedback Loop:** The system processes asynchronous callbacks (webhooks) from the provider to update the action state.

## Common Patterns

### The "Fan-Out" Pattern
A single system event triggers multiple Communication Actions across different channels simultaneously (e.g., an emergency alert sent via SMS, Email, and Push).

### The "Fallback" Pattern
The system attempts delivery via a primary channel (e.g., Push Notification). If delivery is not confirmed within a specific window, it automatically triggers a secondary channel (e.g., SMS).

### The "Digest" Pattern
Instead of sending an action for every event, the system accumulates events over a period and sends a single consolidated Communication Action (e.g., a daily summary email).

## Anti-Patterns

*   **Hardcoded Templates:** Embedding message strings directly within the application code rather than using a centralized template management system.
*   **Synchronous Dispatch:** Blocking the main application thread while waiting for a communication provider to respond. This introduces latency and potential system failure.
*   **Missing Idempotency:** Failing to track whether a specific action has already been sent, leading to duplicate messages during system retries.
*   **Ignoring Feedback:** Treating "Sent" as the final state and failing to process "Bounced" or "Unsubscribed" signals, which damages sender reputation.

## Edge Cases

*   **Recipient Anonymization:** Handling communication actions where the recipient's identity must be masked or hashed for privacy compliance (e.g., GDPR/CCPA).
*   **Expired Content:** Scenarios where a communication is delayed so long that the content is no longer valid (e.g., a "Flash Sale" notification arriving after the sale ends).
*   **Provider Outages:** Strategies for queuing and prioritizing actions when a major delivery provider (e.g., an SMS aggregator) experiences a global downtime.
*   **Rate Limiting (Egress):** Managing bursts of communication actions that exceed the throughput limits of the provider or the recipient's ability to process them.

## Related Topics

*   **Template Management:** The storage and versioning of message formats.
*   **Preference Centers:** Systems that allow recipients to opt-in/out of specific channels.
*   **Event-Driven Architecture:** The underlying infrastructure that typically triggers Communication Actions.
*   **Observability and Logging:** The mechanisms for auditing the history of all sent communications.

## Change Log

| Version | Date | Description |
|---------|------|-------------|
| 1.0 | 2026-01-16 | Initial AI-generated canonical documentation |