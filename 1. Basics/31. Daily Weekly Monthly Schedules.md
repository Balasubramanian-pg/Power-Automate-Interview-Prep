# 31. Daily Weekly Monthly Schedules

Canonical documentation for 31. Daily Weekly Monthly Schedules. This document defines concepts, terminology, and standard usage.

## Purpose
The purpose of Daily, Weekly, and Monthly (DWM) schedules is to provide a structured framework for the periodic execution of tasks, the allocation of resources, and the synchronization of temporal data. These schedules address the requirement for predictability and automation in systems where operations must occur at specific intervals rather than in response to sporadic triggers. By formalizing these intervals, organizations can ensure consistency in reporting, maintenance, data integrity, and operational workflows.

> [!NOTE]
> This documentation is intended to be implementation-agnostic and authoritative.

## Scope
Clarify what is in scope and out of scope for this topic.

**In scope:**
*   Temporal recurrence logic and interval definitions.
*   The relationship between calendar cycles and execution triggers.
*   Standardization of frequency-based scheduling (Daily, Weekly, Monthly).
*   Handling of calendar anomalies (leap years, varying month lengths).

**Out of scope:**
*   Specific syntax for job schedulers (e.g., Cron, systemd timers).
*   Vendor-specific UI/UX implementations for calendar pickers.
*   Real-time or sub-second scheduling (e.g., high-frequency trading).

## Definitions
Provide precise definitions for key terms.

| Term | Definition |
| :--- | :--- |
| **Recurrence Rule** | The logical definition that determines when a task should repeat (e.g., "Every 2nd Tuesday"). |
| **Occurrence** | A single instance of a scheduled event generated by a recurrence rule. |
| **Interval** | The numerical value representing the gap between recurrences (e.g., an interval of 2 in a weekly schedule means "every two weeks"). |
| **Anchor Point** | The initial date and time from which all subsequent occurrences are calculated. |
| **Jitter** | A deliberate, random delay added to a schedule to prevent resource spikes caused by simultaneous executions. |
| **Blackout Window** | A defined period during which scheduled tasks are prohibited from running, regardless of the recurrence rule. |
| **Drift** | The cumulative divergence between the intended schedule and actual execution time, often caused by execution latency. |

## Core Concepts

### Frequency vs. Interval
Frequency defines the unit of time (Daily, Weekly, Monthly), while the interval defines how many of those units must pass before the next occurrence. For example, a "Weekly" frequency with an "Interval of 3" results in a task running every three weeks.

### Deterministic vs. Relative Scheduling
*   **Deterministic Scheduling:** Tasks are anchored to specific calendar coordinates (e.g., "The 1st of every month at 00:00").
*   **Relative Scheduling:** Tasks are anchored to a dynamic position within a period (e.g., "The last Friday of the month" or "The first business day").

### The Anchor Point
Every schedule requires an epoch or start date. Without a defined anchor point, intervals (especially those greater than 1) become ambiguous. The anchor point establishes the "Phase" of the schedule.

## Standard Model

The standard model for DWM schedules follows a hierarchical temporal structure:

1.  **Daily Schedule:**
    *   **Resolution:** Hours, minutes, seconds.
    *   **Variations:** Every $N$ days, or every weekday (Monday–Friday).
2.  **Weekly Schedule:**
    *   **Resolution:** Days of the week (Sunday–Saturday).
    *   **Variations:** Every $N$ weeks on specific days (e.g., Monday and Thursday).
3.  **Monthly Schedule:**
    *   **Resolution:** Day of the month (1–31) or Day of the week within a month (e.g., "Second Wednesday").
    *   **Variations:** Every $N$ months.

### Execution Logic
The system evaluates the current system time against the recurrence rule. If the current time matches an occurrence (and satisfies all constraints like blackout windows), the task is dispatched.

## Common Patterns

### The "Nth Day" Pattern
Used primarily in monthly schedules to target specific days like "The 15th of the month" for payroll or "The 1st" for rent.

### The "Ordinal Weekday" Pattern
Used for events that must fall on a specific day of the week but within a monthly context, such as "The third Thursday of the month."

### The "Business Day" Offset
A pattern where schedules are adjusted to the nearest working day. If a "Monthly" task falls on a Sunday, the pattern dictates it moves to the preceding Friday or the following Monday.

### Sliding Window vs. Fixed Window
*   **Fixed:** The next run is calculated from the *intended* start time of the previous run.
*   **Sliding:** The next run is calculated from the *actual completion* time of the previous run.

## Anti-Patterns

### Overlapping Executions
Scheduling a task to run more frequently than its average duration (e.g., a daily backup that takes 26 hours). This leads to resource exhaustion or data corruption.

### Hardcoding Month Lengths
Assuming all months have 30 or 31 days. This causes failures or skipped executions in February or on the 31st of shorter months.

### Ignoring Time Zone Context
Scheduling tasks based on local server time rather than a standardized time (UTC) or the user's specific time zone, leading to shifts during Daylight Saving Time (DST) transitions.

### Lack of Catch-up Logic
Failing to define what happens if the system is offline during a scheduled occurrence (e.g., should it run immediately upon restart or wait for the next scheduled time?).

## Edge Cases

### The 29th, 30th, and 31st
When a monthly schedule is set for the 31st, the system must define behavior for months with fewer days. Standard approaches include:
*   **Truncation:** Run on the last day of the month (e.g., Feb 28th).
*   **Skip:** Do not run the task for that month.
*   **Overflow:** Run on the 1st of the following month.

### Daylight Saving Time (DST) Transitions
*   **Spring Forward:** An hour is skipped (e.g., 02:00 to 03:00). Tasks scheduled during the "missing" hour may not trigger.
*   **Fall Back:** An hour is repeated. Tasks scheduled during the "doubled" hour may trigger twice.

### Leap Years
Daily schedules based on an interval (e.g., "Every 365 days") will eventually drift relative to the calendar year due to the extra day in February.

## Related Topics
*   **Time Zone Management:** Handling UTC offsets and DST.
*   **Cron Expressions:** A specific syntax for implementing DWM schedules.
*   **Retry Policies:** Logic for handling failed occurrences within a schedule.
*   **Calendar Providers:** Integration with external calendar systems (iCal, Google Calendar).

## Change Log

| Version | Date | Description |
| :--- | :--- | :--- |
| 1.0 | 2026-01-16 | Initial AI-generated canonical documentation |