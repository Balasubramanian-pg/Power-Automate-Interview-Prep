# 81. On Demand User Triggered Flows

Canonical documentation for 81. On Demand User Triggered Flows. This document defines concepts, terminology, and standard usage.

## Purpose
On Demand User Triggered Flows exist to provide human actors with the ability to execute complex, multi-step logic at a specific moment of their choosing. Unlike automated flows—which respond to system events, data changes, or schedules—on-demand flows address the need for human discretion, contextual decision-making, and ad-hoc processing.

This topic addresses the problem space of "semi-automation," where the system possesses the logic to perform a task, but the business process requires a human to determine *if* and *when* that logic should be applied to a specific set of data.

> [!NOTE]
> This documentation is intended to be implementation-agnostic and authoritative.

## Scope
Clarify what is in scope and out of scope for this topic.

**In scope:**
*   Mechanisms for manual initiation of logic.
*   Contextual data passing from the user interface to the execution engine.
*   User-interactive vs. background execution models.
*   Permissioning and governance of manual triggers.
*   Feedback loops and state communication to the initiator.

**Out of scope:**
*   Specific vendor-specific flow builders (e.g., Salesforce Flow, Power Automate, Zapier).
*   System-level event triggers (e.g., `onUpdate`, `onDelete`).
*   Cron-based or time-based scheduling.
*   Specific programming language syntax for flow implementation.

## Definitions
Provide precise definitions for key terms.

| Term | Definition |
|------|------------|
| **Triggering Actor** | The authenticated entity (usually a human user) that initiates the flow. |
| **Contextual Record** | The specific data entity or set of entities from which the flow is launched and upon which it operates. |
| **Input Payload** | The set of variables or parameters provided by the user at the moment of invocation. |
| **Synchronous Execution** | A model where the user must wait for the flow to complete before regaining control of the interface. |
| **Asynchronous Execution** | A model where the flow runs in the background, allowing the user to continue other work. |
| **Idempotency** | The property of a flow where multiple identical requests lead to the same result without unintended side effects. |
| **Invocation Point** | The UI element (button, menu item, link) that exposes the flow to the user. |

## Core Concepts

### Intentionality
The defining characteristic of an on-demand flow is **intent**. The system does not guess; the user explicitly commands the execution. This is critical for processes that have high stakes, such as sending external communications, financial transactions, or irreversible data deletions.

### Contextual Awareness
On-demand flows are typically "aware" of where they were started. If a user triggers a flow from "Invoice #1234," the flow automatically inherits the ID and attributes of that invoice as its primary input.

### User Input Interactivity
Unlike automated flows, on-demand flows often include a "Screen" or "Dialog" phase. This allows the user to provide supplementary data that the system does not yet possess, which then influences the logic of the flow.

### Authorization and Guardrails
Because these flows are triggered by humans, they must respect the security context of the Triggering Actor. A flow should not allow a user to perform actions manually that they are not permitted to perform through the standard interface.

## Standard Model

The standard model for an On Demand User Triggered Flow follows a linear lifecycle:

1.  **Entry Point Discovery:** The user navigates to a record or list and identifies the Invocation Point.
2.  **Authentication/Authorization Check:** The system verifies the user has the "Run Flow" permission and access to the Contextual Record.
3.  **Input Collection (Optional):** The system presents a UI to collect variables (e.g., "Reason for adjustment," "Target date").
4.  **Hand-off to Engine:** The UI sends the Contextual Record ID and Input Payload to the orchestration engine.
5.  **Execution:** The logic runs (validations, data transformations, external integrations).
6.  **Feedback/Output:** The system notifies the user of success, failure, or the need for further action.

## Common Patterns

### The "Bulk Action" Pattern
A user selects multiple records from a list view and triggers a single flow to process them all simultaneously (e.g., "Mass Update Status").

### The "Data Enrichment" Pattern
A user triggers a flow to fetch data from an external API to populate missing fields on a local record (e.g., "Refresh Credit Score").

### The "Approval Initiation" Pattern
A user completes their work on a record and triggers a flow to lock the record and notify a supervisor for review.

### The "Document Generation" Pattern
A user triggers a flow to gather data from multiple related objects, format it into a PDF, and email it to a client.

## Anti-Patterns

*   **The Black Box:** Triggering a flow that provides no feedback. The user is left wondering if the click worked or if the process failed.
*   **The Shadow Automation:** Using an on-demand flow for a task that is 100% predictable and could be handled by a system trigger, thereby increasing manual overhead.
*   **Bypassing Validation:** Designing a flow that updates data while ignoring the standard business rules or validation logic applied to the UI.
*   **Over-parameterization:** Requiring the user to input data that the system already knows or could easily calculate, leading to "input fatigue."

## Edge Cases

*   **Race Conditions:** Two users triggering the same on-demand flow on the same record at the exact same time.
*   **Long-Running Processes:** A flow that takes minutes to execute. If synchronous, it may cause a browser timeout; if asynchronous, the user may navigate away before it finishes.
*   **Partial Success in Bulk:** When a flow is triggered on 10 records, but 3 fail due to validation errors. The system must decide whether to roll back all 10 or commit the 7 successful ones.
*   **Expired Context:** A user opens an input dialog, waits an hour (during which the record is deleted by another process), and then clicks "Submit."

## Related Topics

*   **82. Event-Driven Architectures:** How systems respond to data changes automatically.
*   **15. Identity and Access Management (IAM):** Governing who can trigger specific logic.
*   **44. Transaction Management:** Ensuring data integrity during flow execution (Atomicity, Consistency, Isolation, Durability).
*   **102. User Interface Design Patterns:** Best practices for placing Invocation Points.

## Change Log

| Version | Date | Description |
|---------|------|-------------|
| 1.0 | 2026-01-16 | Initial AI-generated canonical documentation |