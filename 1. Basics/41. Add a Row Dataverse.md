# 41. Add a Row Dataverse

Canonical documentation for 41. Add a Row Dataverse. This document defines concepts, terminology, and standard usage.

## Purpose
The "Add a Row" operation serves as the primary mechanism for data ingestion and record creation within a structured, relational data service. Its purpose is to instantiate a new entry (row) within a specific entity (table), ensuring that the data conforms to the predefined schema, security constraints, and business logic of the environment. This operation transforms transient transactional data into persistent state.

> [!NOTE]
> This documentation is intended to be implementation-agnostic and authoritative, focusing on the architectural behavior of the Dataverse row creation process.

## Scope
Clarify what is in scope and out of scope for this topic.

**In scope:**
* **Schema Validation:** The enforcement of data types, required fields, and character limits during the creation process.
* **Relationship Mapping:** The mechanism for linking the new row to existing records via lookup attributes.
* **Transaction Integrity:** The atomic nature of the creation event.
* **Metadata Interaction:** How the system handles system-defined fields (e.g., timestamps, ownership).

**Out of scope:**
* **Specific Vendor UI:** Step-by-step instructions for specific low-code or no-code graphical interfaces.
* **Bulk Import Tools:** High-volume data migration utilities that bypass standard row-by-row logic.
* **Client-side Validation:** Logic performed in a browser or application before the data reaches the service.

## Definitions
Provide precise definitions for key terms.

| Term | Definition |
|------|------------|
| **Entity (Table)** | A structured container representing a specific category of data (e.g., Account, Contact). |
| **Row (Record)** | A single, unique instance of data within an entity. |
| **Attribute (Column)** | A discrete data field within a row, defined by a specific data type. |
| **GUID** | Globally Unique Identifier; the 128-bit integer used as the primary key for the row. |
| **Lookup** | A specialized attribute type that establishes a many-to-one relationship with another entity. |
| **Payload** | The collection of data values sent to the service to define the new row. |
| **Upsert** | A hybrid operation that either updates an existing row or creates a new one if no match is found. |

## Core Concepts

### Schema Adherence
Every "Add a Row" operation is governed by a strict schema. The service validates the incoming payload against the entity definition. If a mandatory attribute is missing or if a value violates a data type constraint (e.g., text in a numerical field), the operation must fail to maintain data integrity.

### Identity Management
Upon successful creation, the system assigns a unique identifier (GUID) to the row. While some implementations allow for the provision of a custom GUID, the standard behavior is system-generation to ensure global uniqueness across the environment.

### Ownership and Security
Each row is created within a security context. This determines the "Owner" of the record (typically a User or Team) and dictates which other actors in the system have permission to read, update, or delete the newly created data based on hierarchical or role-based access control (RBAC).

## Standard Model
The standard model for adding a row follows a Request-Response pattern:

1.  **Initialization:** The calling agent identifies the target entity and assembles the attribute-value pairs.
2.  **Association:** Lookups are resolved by referencing the unique identifiers of related records.
3.  **Validation:** The service checks for schema compliance, security permissions, and active business rules.
4.  **Persistence:** The data is committed to the underlying database.
5.  **Post-Processing:** System-defined fields (Created On, Created By, Version Number) are populated.
6.  **Acknowledgment:** The service returns a success code along with the URI or GUID of the new row.

## Common Patterns

### The Parent-Child Pattern
Creating a "Child" record that is immediately associated with a "Parent" record. This is achieved by populating a lookup attribute in the child row with the GUID of the parent row.

### Default Value Injection
Relying on the data service to populate specific attributes that were not included in the initial payload, based on predefined entity-level defaults.

### Transactional Chaining
Executing an "Add a Row" operation as part of a larger sequence where the success of the creation is a prerequisite for subsequent logic (e.g., creating a Task immediately after creating an Account).

## Anti-Patterns

### Hardcoding Identifiers
Including static GUIDs for lookups or primary keys within the logic. This leads to failure when moving between environments (e.g., Development to Production) where IDs may differ.

### Over-fetching in Lookups
Attempting to associate records by searching for "Name" or "Email" strings rather than using the unique GUID. This introduces ambiguity and potential for incorrect associations.

### Ignoring Return Payloads
Failing to capture the GUID of the newly created row, which prevents the calling system from performing follow-up actions on that specific record.

## Edge Cases

### Polymorphic Lookups
Scenarios where a lookup attribute can point to more than one type of entity (e.g., a "Customer" lookup that can be either an "Account" or a "Contact"). This requires the payload to explicitly define the target entity type.

### Concurrency Conflicts
When two simultaneous requests attempt to create a record with the same unique alternate key. The system must enforce uniqueness and reject the second request.

### Large Object Handling
Adding a row that includes large binary data (images or files). Standard row creation often handles the metadata first, with the binary content handled as a secondary stream or specialized attribute type.

## Related Topics
* **42. Update a Row Dataverse:** The subsequent modification of existing data.
* **Relational Data Modeling:** The theoretical framework for entity relationships.
* **Service Principal Security:** The authentication method often used for automated row creation.
* **Web API (OData):** The protocol typically used to execute these operations programmatically.

## Change Log
| Version | Date | Description |
|---------|------|-------------|
| 1.0 | 2026-01-16 | Initial AI-generated canonical documentation |