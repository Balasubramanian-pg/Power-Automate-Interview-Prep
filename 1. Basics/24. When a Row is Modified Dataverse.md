# 24. When a Row is Modified Dataverse

Canonical documentation for 24. When a Row is Modified Dataverse. This document defines concepts, terminology, and standard usage.

## Purpose
The "When a Row is Modified" event serves as a reactive trigger within a data-driven architecture. Its primary purpose is to detect state changes in existing data records and initiate downstream logic, synchronization, or notifications. This mechanism addresses the need for event-driven workflows that respond to data evolution rather than manual invocation, ensuring that business logic remains synchronized with the underlying data layer.

> [!NOTE]
> This documentation is intended to be implementation-agnostic and authoritative, focusing on the behavioral mechanics of the Dataverse event framework.

## Scope
Clarify what is in scope and out of scope for this topic.

**In scope:**
* **Event Detection:** The mechanics of identifying that a record's state has transitioned.
* **Filtering Logic:** The criteria used to narrow the trigger's activation (e.g., column-specific changes).
* **Contextual Metadata:** The data payload provided at the moment of modification (Pre-images and Post-images).
* **Execution Boundaries:** The scope and security context in which the modification event is processed.

**Out of scope:**
* **Specific UI Implementations:** Step-by-step guides for Power Automate or Logic Apps designers.
* **External Integrations:** Detailed configurations for third-party service buses or webhooks, except where they relate to the core trigger event.
* **Legacy Data Protocols:** Deprecated methods of data polling.

## Definitions
Provide precise definitions for key terms.

| Term | Definition |
|------|------------|
| **Row (Record)** | A single instance of an entity/table containing unique data identified by a Primary Key. |
| **Modification** | An update operation performed on one or more columns of an existing row. |
| **Filtering Attributes** | A defined subset of columns that, when changed, permit the trigger to execute. |
| **Scope** | The organizational or security boundary (e.g., User, Business Unit, Organization) that limits which row modifications are visible to the trigger. |
| **Pre-Image** | A snapshot of the row's data state immediately before the modification occurred. |
| **Post-Image** | A snapshot of the row's data state immediately after the modification was committed. |
| **Idempotency** | The property of a process where multiple identical modifications result in the same system state without unintended side effects. |

## Core Concepts
### Event-Driven Architecture (EDA)
The modification of a row is treated as a discrete event. The system observes the data layer and emits a signal when a "Commit" operation is successful. This allows for decoupled systems where the data store does not need to know the specifics of the downstream logic.

### Change Tracking
To efficiently handle modifications, the system utilizes change tracking to determine if the data values in the "Update" request differ from the values currently persisted in the database.

### Asynchronous vs. Synchronous Execution
*   **Synchronous:** The modification event is processed as part of the database transaction. If the logic fails, the modification is rolled back.
*   **Asynchronous:** The modification is committed first, and the trigger logic executes independently. This is the standard model for most "When a Row is Modified" workflows to ensure system performance.

## Standard Model
The standard model for a modification event follows a strict pipeline:
1.  **The Request:** An update request is sent to the data layer.
2.  **Validation:** The system verifies the user has permissions to modify the row.
3.  **Attribute Comparison:** The system checks if the modified columns match the "Filtering Attributes" defined in the trigger.
4.  **Scope Verification:** The system confirms the modified row falls within the defined "Scope."
5.  **Event Emission:** If filters and scope match, an event payload is generated containing the unique identifier of the row and the modified values.
6.  **Logic Execution:** The downstream process (workflow, code, or notification) consumes the payload.

## Common Patterns
### Field-Level Filtering
Restricting the trigger to fire only when specific, high-value columns (e.g., "Status," "Owner," or "Total Amount") are changed. This prevents unnecessary executions and reduces system overhead.

### State Transition Logic
Using the modification event to detect when a record moves from one lifecycle stage to another (e.g., from "Draft" to "Published"). This often involves comparing the value of a status field against its previous state.

### Data Enrichment
Upon modification, the trigger initiates a process to fetch related data from other tables or external services to update the modified row further or populate a secondary system.

## Anti-Patterns
### The Infinite Loop (Circular Reference)
A scenario where a trigger is set to fire "When a Row is Modified," and the resulting logic updates the *same* row in a way that triggers the event again. This leads to exhaustion of system resources.

### Broad-Spectrum Triggering
Failing to define filtering attributes, causing the trigger to fire on every minor update (such as system-generated "Last Modified" timestamps). This creates significant "noise" and performance degradation.

### Over-Reliance on Synchronous Logic
Performing heavy processing or external API calls within a synchronous modification pipeline, which increases latency for the end-user performing the update.

## Edge Cases
### Bulk Operations
When thousands of rows are modified simultaneously (e.g., via an import or bulk edit), the system may throttle event emission or batch notifications. Documentation must account for whether the trigger fires per-row or per-batch.

### No-Op Updates
An update request is submitted where the values sent match the values already in the database. Depending on the configuration, the system may or may not consider this a "Modification" event.

### Deleted Records
If a row is modified and then immediately deleted before the asynchronous trigger executes, the trigger may fail to retrieve the "Post-Image" of the record, leading to "Record Not Found" errors.

### Depth and Recursion
In complex environments, a modification might be triggered by another automated process. Systems often have a "Depth" limit to prevent cascading triggers from executing beyond a certain level (e.g., 8 levels deep).

## Related Topics
*   **23. When a Row is Created:** The preceding lifecycle event.
*   **25. When a Row is Deleted:** The terminal lifecycle event.
*   **Dataverse Plug-in Execution Pipeline:** The underlying architecture for synchronous data events.
*   **Change Data Capture (CDC):** The high-level pattern for tracking data changes over time.

## Change Log
| Version | Date | Description |
|---------|------|-------------|
| 1.0 | 2026-01-16 | Initial AI-generated canonical documentation |